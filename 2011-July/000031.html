<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [artscene-cvs] art.scene.v2/htdocs/news/class avnews.class.php, 1.1,	1.2 avcomments.class.php, 1.1, 1.2 news.class.php, 1.4,	1.5 avnewscategory.class.php, 1.1, 1.2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/artscene-cvs/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:artscene-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bartscene-cvs%5D%20art.scene.v2/htdocs/news/class%20avnews.class.php%2C%201.1%2C%0A%091.2%20avcomments.class.php%2C%201.1%2C%201.2%20news.class.php%2C%201.4%2C%0A%091.5%20avnewscategory.class.php%2C%201.1%2C%201.2&In-Reply-To=%3C20110704210050.E38A8483383%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000030.html">
   <LINK REL="Next"  HREF="000032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[artscene-cvs] art.scene.v2/htdocs/news/class avnews.class.php, 1.1,	1.2 avcomments.class.php, 1.1, 1.2 news.class.php, 1.4,	1.5 avnewscategory.class.php, 1.1, 1.2</H1>
    <B>pukomuko at BerliOS</B> 
    <A HREF="mailto:artscene-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bartscene-cvs%5D%20art.scene.v2/htdocs/news/class%20avnews.class.php%2C%201.1%2C%0A%091.2%20avcomments.class.php%2C%201.1%2C%201.2%20news.class.php%2C%201.4%2C%0A%091.5%20avnewscategory.class.php%2C%201.1%2C%201.2&In-Reply-To=%3C20110704210050.E38A8483383%40sheep.berlios.de%3E"
       TITLE="[artscene-cvs] art.scene.v2/htdocs/news/class avnews.class.php, 1.1,	1.2 avcomments.class.php, 1.1, 1.2 news.class.php, 1.4,	1.5 avnewscategory.class.php, 1.1, 1.2">pukomuko at sheep.berlios.de
       </A><BR>
    <I>Mon Jul  4 23:00:50 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000030.html">[artscene-cvs] art.scene.v2/htdocs process.php, 1.2,	1.3 site.ini.php, 1.3, 1.4
</A></li>
        <LI>Next message: <A HREF="000032.html">[artscene-cvs] art.scene.v2/htdocs/darbai/class avworks.class.php,	1.4, 1.5 darbai.class.php, 1.28,	1.29 avworks_delete_log.class.php, 1.4,	1.5 avworkcategory.class.php, 1.2, 1.3 avcomments.class.php,	1.2, 1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/artscene/art.scene.v2/htdocs/news/class
In directory sheep:/tmp/cvs-serv31643/htdocs/news/class

Modified Files:
	avnews.class.php avcomments.class.php news.class.php 
	avnewscategory.class.php 
Log Message:
php5 compatibility
not everything is tested, but most of the functionality appears to be working.

Index: avnews.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/news/class/avnews.class.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -C 2 -d -r1.1 -r1.2
*** avnews.class.php	4 Aug 2004 22:46:27 -0000	1.1
--- avnews.class.php	4 Jul 2011 21:00:47 -0000	1.2
***************
*** 63,94 ****
  
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
! 		$this-&gt;controls[] = &amp; new avcLinkText( &amp;$this, 'subject', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 50, 'avcomments');
! 		$this-&gt;controls[] = &amp; new avcTextArea( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 0, $g_lang['news_info'], 1, 50, 10);
! 		$this-&gt;controls[] = &amp; new avcTextArea_bbcode( &amp;$this, 'full_text', $g_lang['news_full_text'], '', 0, 1, 0, '', 1, 40, 25);
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'keywords', $g_lang['news_keywords'], '', 0, 0, 1, $g_lang['news_keywords'], 1, 40, 'avcomments');
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'category_id', $g_lang['news_category'], '', 1, 1, 1, $g_lang['news_category'], 1, 'avnewscategory', 'id', 'name');
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'submiter', $g_lang['news_author'], $GLOBALS['g_user_id'], 1, 1, 1, $g_lang['news_author'], 1, 'u_users', 'id', 'username');
  
! //		$this-&gt;controls[] = &amp; new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, $g_ini-&gt;read_var('avnews', 'image_dir'), $g_ini-&gt;read_var('avnews', 'image_url'), 110, 210);
  
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'file', 'Paveiksliukas', '', 0, 1, 1, 'Failas', 1, 40);
  
  		
! //		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'visible', 'Patvirtinta', 0, 0, 1, 1, 'Patvirtinta', 1);
  
  
  		if ('list' == $page) // is_permission('avnews_auth') ||
  		{
! 			$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'authorizer', 'Tvirtintojas', $GLOBALS['g_user_id'], 1, 1, 1, 'Tvirtintojas', 1, 'u_users', 'id', 'username');
! 			$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'auth_date', 'Tvirtinimo data', date('Y.m.d'), 1, 1, 1, 'Tvirt. data', 1);
! 			$this-&gt;controls[] = &amp; new avcSelect( &amp;$this, 'visible', 'Patvirtinta', 1, 0, 1, 1, 'Patvirtinta', 1, array('0'=&gt;'ne', '1'=&gt;'taip'));
  		}
  
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		if (empty($pid))
--- 63,94 ----
  
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
! 		$this-&gt;controls[] = new avcLinkText( &amp;$this, 'subject', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 50, 'avcomments');
! 		$this-&gt;controls[] = new avcTextArea( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 0, $g_lang['news_info'], 1, 50, 10);
! 		$this-&gt;controls[] = new avcTextArea_bbcode( &amp;$this, 'full_text', $g_lang['news_full_text'], '', 0, 1, 0, '', 1, 40, 25);
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'keywords', $g_lang['news_keywords'], '', 0, 0, 1, $g_lang['news_keywords'], 1, 40, 'avcomments');
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'category_id', $g_lang['news_category'], '', 1, 1, 1, $g_lang['news_category'], 1, 'avnewscategory', 'id', 'name');
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'submiter', $g_lang['news_author'], $GLOBALS['g_user_id'], 1, 1, 1, $g_lang['news_author'], 1, 'u_users', 'id', 'username');
  
! //		$this-&gt;controls[] = new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, $g_ini-&gt;read_var('avnews', 'image_dir'), $g_ini-&gt;read_var('avnews', 'image_url'), 110, 210);
  
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'file', 'Paveiksliukas', '', 0, 1, 1, 'Failas', 1, 40);
  
  		
! //		$this-&gt;controls[] = new avcHidden( &amp;$this, 'visible', 'Patvirtinta', 0, 0, 1, 1, 'Patvirtinta', 1);
  
  
  		if ('list' == $page) // is_permission('avnews_auth') ||
  		{
! 			$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'authorizer', 'Tvirtintojas', $GLOBALS['g_user_id'], 1, 1, 1, 'Tvirtintojas', 1, 'u_users', 'id', 'username');
! 			$this-&gt;controls[] = new avcDate( &amp;$this, 'auth_date', 'Tvirtinimo data', date('Y.m.d'), 1, 1, 1, 'Tvirt. data', 1);
! 			$this-&gt;controls[] = new avcSelect( &amp;$this, 'visible', 'Patvirtinta', 1, 0, 1, 1, 'Patvirtinta', 1, array('0'=&gt;'ne', '1'=&gt;'taip'));
  		}
  
! 		$this-&gt;controls[] = new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		if (empty($pid))

Index: avnewscategory.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/news/class/avnewscategory.class.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -C 2 -d -r1.1 -r1.2
*** avnewscategory.class.php	4 Aug 2004 22:46:27 -0000	1.1
--- avnewscategory.class.php	4 Jul 2011 21:00:47 -0000	1.2
***************
*** 45,60 ****
  		$this-&gt;name = 'avnewscategory';
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
  		
! 		$this-&gt;controls[] = &amp; new avcLinkText( &amp;$this, 'name', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 40, 'avnews');
  		
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 1, $g_lang['news_info'], 1, 60);
  		
! 		$this-&gt;controls[] = &amp; new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, 'd:\localhost\avms\files', '../files/');
  
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'sort_number', $g_lang['menuitem_sort'], '1',  
                  0, 1, 1, $g_lang['menuitem_sort'], 1 , 5); 
  		
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  
--- 45,60 ----
  		$this-&gt;name = 'avnewscategory';
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
  		
! 		$this-&gt;controls[] = new avcLinkText( &amp;$this, 'name', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 40, 'avnews');
  		
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 1, $g_lang['news_info'], 1, 60);
  		
! 		$this-&gt;controls[] = new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, 'd:\localhost\avms\files', '../files/');
  
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'sort_number', $g_lang['menuitem_sort'], '1',  
                  0, 1, 1, $g_lang['menuitem_sort'], 1 , 5); 
  		
! 		$this-&gt;controls[] = new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  

Index: news.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/news/class/news.class.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -C 2 -d -r1.4 -r1.5
*** news.class.php	26 Jul 2008 21:33:28 -0000	1.4
--- news.class.php	4 Jul 2011 21:00:47 -0000	1.5
***************
*** 286,290 ****
  		if (!empty($GLOBALS['g_user_id']))
  		{
! 			$this-&gt;tpl-&gt;set_var('url', $GLOBALS['REQUEST_URI']);
  			$this-&gt;tpl-&gt;process('post_comment', 'post_comment_block');
  		}
--- 286,290 ----
  		if (!empty($GLOBALS['g_user_id']))
  		{
! 			$this-&gt;tpl-&gt;set_var('url', $_SERVER['REQUEST_URI']);
  			$this-&gt;tpl-&gt;process('post_comment', 'post_comment_block');
  		}

Index: avcomments.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/news/class/avcomments.class.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -C 2 -d -r1.1 -r1.2
*** avcomments.class.php	4 Aug 2004 22:46:27 -0000	1.1
--- avcomments.class.php	4 Jul 2011 21:00:47 -0000	1.2
***************
*** 47,61 ****
  
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, 'id', 0);
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'subject', 'subjectas', '', 1, 1, 1, 'subjectas', 1, 20);
! 		$this-&gt;controls[] = &amp; new avcTextArea( &amp;$this, 'info', 'info', '', 1, 1, 1, 'info', 1, 40, 5);
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'parent_id', 'tetukas', '', 1, 1, 1, $g_lang['news_category'], 1, 'avnews', 'id', 'subject');
  		
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'user_id', 'useris', '', 1, 1, 1, 'useris', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'table_name', '', $this-&gt;parent, 0, 1);		
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, '', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Komentarai';
--- 47,61 ----
  
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, 'id', 0);
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'subject', 'subjectas', '', 1, 1, 1, 'subjectas', 1, 20);
! 		$this-&gt;controls[] = new avcTextArea( &amp;$this, 'info', 'info', '', 1, 1, 1, 'info', 1, 40, 5);
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'parent_id', 'tetukas', '', 1, 1, 1, $g_lang['news_category'], 1, 'avnews', 'id', 'subject');
  		
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'user_id', 'useris', '', 1, 1, 1, 'useris', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'table_name', '', $this-&gt;parent, 0, 1);		
! 		$this-&gt;controls[] = new avcActions( &amp;$this, '', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Komentarai';


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000030.html">[artscene-cvs] art.scene.v2/htdocs process.php, 1.2,	1.3 site.ini.php, 1.3, 1.4
</A></li>
	<LI>Next message: <A HREF="000032.html">[artscene-cvs] art.scene.v2/htdocs/darbai/class avworks.class.php,	1.4, 1.5 darbai.class.php, 1.28,	1.29 avworks_delete_log.class.php, 1.4,	1.5 avworkcategory.class.php, 1.2, 1.3 avcomments.class.php,	1.2, 1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/artscene-cvs">More information about the artscene-cvs
mailing list</a><br>
</body></html>
