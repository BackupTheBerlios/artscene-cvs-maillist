<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [artscene-cvs] art.scene.v2/htdocs/darbai/class avworks.class.php,	1.4, 1.5 darbai.class.php, 1.28,	1.29 avworks_delete_log.class.php, 1.4,	1.5 avworkcategory.class.php, 1.2, 1.3 avcomments.class.php,	1.2, 1.3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/artscene-cvs/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:artscene-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bartscene-cvs%5D%20art.scene.v2/htdocs/darbai/class%20avworks.class.php%2C%0A%091.4%2C%201.5%20darbai.class.php%2C%201.28%2C%0A%091.29%20avworks_delete_log.class.php%2C%201.4%2C%0A%091.5%20avworkcategory.class.php%2C%201.2%2C%201.3%20avcomments.class.php%2C%0A%091.2%2C%201.3&In-Reply-To=%3C20110704210051.0090A483384%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000031.html">
   <LINK REL="Next"  HREF="000035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[artscene-cvs] art.scene.v2/htdocs/darbai/class avworks.class.php,	1.4, 1.5 darbai.class.php, 1.28,	1.29 avworks_delete_log.class.php, 1.4,	1.5 avworkcategory.class.php, 1.2, 1.3 avcomments.class.php,	1.2, 1.3</H1>
    <B>pukomuko at BerliOS</B> 
    <A HREF="mailto:artscene-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bartscene-cvs%5D%20art.scene.v2/htdocs/darbai/class%20avworks.class.php%2C%0A%091.4%2C%201.5%20darbai.class.php%2C%201.28%2C%0A%091.29%20avworks_delete_log.class.php%2C%201.4%2C%0A%091.5%20avworkcategory.class.php%2C%201.2%2C%201.3%20avcomments.class.php%2C%0A%091.2%2C%201.3&In-Reply-To=%3C20110704210051.0090A483384%40sheep.berlios.de%3E"
       TITLE="[artscene-cvs] art.scene.v2/htdocs/darbai/class avworks.class.php,	1.4, 1.5 darbai.class.php, 1.28,	1.29 avworks_delete_log.class.php, 1.4,	1.5 avworkcategory.class.php, 1.2, 1.3 avcomments.class.php,	1.2, 1.3">pukomuko at sheep.berlios.de
       </A><BR>
    <I>Mon Jul  4 23:00:50 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000031.html">[artscene-cvs] art.scene.v2/htdocs/news/class avnews.class.php, 1.1,	1.2 avcomments.class.php, 1.1, 1.2 news.class.php, 1.4,	1.5 avnewscategory.class.php, 1.1, 1.2
</A></li>
        <LI>Next message: <A HREF="000035.html">[artscene-cvs] art.scene.v2/htdocs/control ini_edit.php, 1.1,	1.2 index.php, 1.1, 1.2 settings_edit.php, 1.1,	1.2 control.php, 1.1, 1.2 admin.php, 1.3, 1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32">[ date ]</a>
              <a href="thread.html#32">[ thread ]</a>
              <a href="subject.html#32">[ subject ]</a>
              <a href="author.html#32">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/artscene/art.scene.v2/htdocs/darbai/class
In directory sheep:/tmp/cvs-serv31643/htdocs/darbai/class

Modified Files:
	avworks.class.php darbai.class.php 
	avworks_delete_log.class.php avworkcategory.class.php 
	avcomments.class.php 
Log Message:
php5 compatibility
not everything is tested, but most of the functionality appears to be working.

Index: avworks_delete_log.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/darbai/class/avworks_delete_log.class.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -C 2 -d -r1.4 -r1.5
*** avworks_delete_log.class.php	8 Nov 2006 22:54:52 -0000	1.4
--- avworks_delete_log.class.php	4 Jul 2011 21:00:48 -0000	1.5
***************
*** 58,75 ****
  		$this-&gt;name = 'avworks_delete_log';
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 0, '', 0);
! 		$this-&gt;controls[] = &amp; new avcDbText( &amp;$this, 'admin_id', 'Trynikas', '', 1, 1, 1, 'Trynikas', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);		
  
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'work_category', 'Kategorija', '', 1, 1, 1, 'Kategorija', 1, 'avworkcategory', 'id', 'name');
! 		$this-&gt;controls[] = &amp; new avcDbText( &amp;$this, 'work_submiter', 'Autorius', $GLOBALS['g_user_id'], 1, 1, 1, 'Autorius', 1, 'u_users', 'id', 'username');
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'work_subject', 'Pavadinimas', '', 0, 1, 1, 'Pavadinimas', 1);
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'work_posted', 'Atsiustas', date('Y.m.d'), 1, 1, 1, 'Atsiustas', 1);		
  
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'work_votecount', 'Balsai', '', 0, 1, 1, 'Balsai', 1);
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'work_summark', 'Suma', 0, 0, 1, 1, 'Suma', 1);
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'work_avgmark', 'Vid.', 0, 0, 1, 1, 'Vid.', 1);
  
  		$this-&gt;description = 'Darb&#248; trynimai';
--- 58,75 ----
  		$this-&gt;name = 'avworks_delete_log';
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 0, '', 0);
! 		$this-&gt;controls[] = new avcDbText( &amp;$this, 'admin_id', 'Trynikas', '', 1, 1, 1, 'Trynikas', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);		
  
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'work_category', 'Kategorija', '', 1, 1, 1, 'Kategorija', 1, 'avworkcategory', 'id', 'name');
! 		$this-&gt;controls[] = new avcDbText( &amp;$this, 'work_submiter', 'Autorius', $GLOBALS['g_user_id'], 1, 1, 1, 'Autorius', 1, 'u_users', 'id', 'username');
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'work_subject', 'Pavadinimas', '', 0, 1, 1, 'Pavadinimas', 1);
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'work_posted', 'Atsiustas', date('Y.m.d'), 1, 1, 1, 'Atsiustas', 1);		
  
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'work_votecount', 'Balsai', '', 0, 1, 1, 'Balsai', 1);
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'work_summark', 'Suma', 0, 0, 1, 1, 'Suma', 1);
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'work_avgmark', 'Vid.', 0, 0, 1, 1, 'Vid.', 1);
  
  		$this-&gt;description = 'Darb&#248; trynimai';

Index: darbai.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/darbai/class/darbai.class.php,v
retrieving revision 1.28
retrieving revision 1.29
diff -C 2 -d -r1.28 -r1.29
*** darbai.class.php	27 Nov 2008 02:05:34 -0000	1.28
--- darbai.class.php	4 Jul 2011 21:00:48 -0000	1.29
***************
*** 25,29 ****
  	{
  		avColumn::constructor();
! 		$this-&gt;sql =&amp; new darbai_sql(&amp;$this-&gt;db);
  	}
  
--- 25,29 ----
  	{
  		avColumn::constructor();
! 		$this-&gt;sql = new darbai_sql(&amp;$this-&gt;db);
  	}
  
***************
*** 276,280 ****
  		  if ($g_usr-&gt;can_i_comment())
  		  {
! 			   $this-&gt;tpl-&gt;set_var('url', $GLOBALS['REQUEST_URI']);
  			   $this-&gt;tpl-&gt;process('post_comment', 'post_comment_block');
  			}
--- 276,280 ----
  		  if ($g_usr-&gt;can_i_comment())
  		  {
! 			   $this-&gt;tpl-&gt;set_var('url', $_SERVER['REQUEST_URI']);
  			   $this-&gt;tpl-&gt;process('post_comment', 'post_comment_block');
  			}

Index: avworks.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/darbai/class/avworks.class.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -C 2 -d -r1.4 -r1.5
*** avworks.class.php	30 Nov 2004 23:14:46 -0000	1.4
--- avworks.class.php	4 Jul 2011 21:00:48 -0000	1.5
***************
*** 68,90 ****
  
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
! 		$this-&gt;controls[] = &amp; new avcLinkText( &amp;$this, 'subject', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 50, 'avcomments');
! 		$this-&gt;controls[] = &amp; new avcTextArea_bbcode( &amp;$this, 'info', 'Apra&#240;ymas', '', 1, 1, 0, 'Apra&#240;ymas', 1, 50, 10);
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'category_id', $g_lang['news_category'], '', 1, 1, 1, $g_lang['news_category'], 1, 'avworkcategory', 'id', 'name');
! 		$this-&gt;controls[] = &amp; new avcDbText( &amp;$this, 'submiter', $g_lang['news_author'], $GLOBALS['g_user_id'], 1, 1, 1, $g_lang['news_author'], 1, 'u_users', 'id', 'username');
  
  
! 		$this-&gt;controls[] = &amp; new avcImage( &amp;$this, 'thumbnail', 'Thumbnail', '', 0, 1, 0, $g_lang['news_image'], 1, $g_ini-&gt;read_var('avworks', 'thumbnails_dir'), $g_ini-&gt;read_var('avworks', 'thumbnails_url'), 110, 210);
  
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'file', 'Failas', '', 0, 1, 0, 'Failas', 1);
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'views', 'Per&#254;i&#251;ros', 0, 0, 1, 1, 'Per&#254;i&#251;ros', 1);
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'score', 'Score', 0, 0, 1, 1, 'Score', 1);
  
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'color', 'Spalva', '', 0, 1, 1, 'Spalva', 1, 60);
  
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Darbai';
--- 68,90 ----
  
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
! 		$this-&gt;controls[] = new avcLinkText( &amp;$this, 'subject', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 50, 'avcomments');
! 		$this-&gt;controls[] = new avcTextArea_bbcode( &amp;$this, 'info', 'Apra&#240;ymas', '', 1, 1, 0, 'Apra&#240;ymas', 1, 50, 10);
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'category_id', $g_lang['news_category'], '', 1, 1, 1, $g_lang['news_category'], 1, 'avworkcategory', 'id', 'name');
! 		$this-&gt;controls[] = new avcDbText( &amp;$this, 'submiter', $g_lang['news_author'], $GLOBALS['g_user_id'], 1, 1, 1, $g_lang['news_author'], 1, 'u_users', 'id', 'username');
  
  
! 		$this-&gt;controls[] = new avcImage( &amp;$this, 'thumbnail', 'Thumbnail', '', 0, 1, 0, $g_lang['news_image'], 1, $g_ini-&gt;read_var('avworks', 'thumbnails_dir'), $g_ini-&gt;read_var('avworks', 'thumbnails_url'), 110, 210);
  
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'file', 'Failas', '', 0, 1, 0, 'Failas', 1);
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'views', 'Per&#254;i&#251;ros', 0, 0, 1, 1, 'Per&#254;i&#251;ros', 1);
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'score', 'Score', 0, 0, 1, 1, 'Score', 1);
  
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'color', 'Spalva', '', 0, 1, 1, 'Spalva', 1, 60);
  
! 		$this-&gt;controls[] = new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Darbai';

Index: avworkcategory.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/darbai/class/avworkcategory.class.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -C 2 -d -r1.2 -r1.3
*** avworkcategory.class.php	18 Sep 2004 10:29:45 -0000	1.2
--- avworkcategory.class.php	4 Jul 2011 21:00:48 -0000	1.3
***************
*** 46,61 ****
  		$this-&gt;name = 'avworkcategory';
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
  		
! 		$this-&gt;controls[] = &amp; new avcLinkText( &amp;$this, 'name', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 40, 'avworks');
  		
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 1, $g_lang['news_info'], 1, 60);
  		
! 		$this-&gt;controls[] = &amp; new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, 'd:\localhost\avms\files', '../files/');
  
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'sort_number', $g_lang['menuitem_sort'], '1',  
                  0, 1, 1, $g_lang['menuitem_sort'], 1 , 5); 
  		
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  
--- 46,61 ----
  		$this-&gt;name = 'avworkcategory';
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, '', 0);
  		
! 		$this-&gt;controls[] = new avcLinkText( &amp;$this, 'name', $g_lang['news_subject'], '', 1, 1, 1, $g_lang['news_subject'], 1, 40, 'avworks');
  		
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'info', $g_lang['news_info'], '', 1, 1, 1, $g_lang['news_info'], 1, 60);
  		
! 		$this-&gt;controls[] = new avcImage( &amp;$this, 'file', $g_lang['news_image'], '', 0, 1, 0, $g_lang['news_image'], 1, 'd:\localhost\avms\files', '../files/');
  
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'sort_number', $g_lang['menuitem_sort'], '1',  
                  0, 1, 1, $g_lang['menuitem_sort'], 1 , 5); 
  		
! 		$this-&gt;controls[] = new avcActions( &amp;$this, 'actions', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  

Index: avcomments.class.php
===================================================================
RCS file: /cvsroot/artscene/art.scene.v2/htdocs/darbai/class/avcomments.class.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -C 2 -d -r1.2 -r1.3
*** avcomments.class.php	18 Sep 2004 10:29:45 -0000	1.2
--- avcomments.class.php	4 Jul 2011 21:00:48 -0000	1.3
***************
*** 48,62 ****
  
  
! 		$this-&gt;controls[] = &amp; new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, 'id', 0);
! 		$this-&gt;controls[] = &amp; new avcText( &amp;$this, 'subject', 'subjectas', '', 1, 1, 1, 'subjectas', 1, 20);
! 		$this-&gt;controls[] = &amp; new avcTextArea( &amp;$this, 'info', 'info', '', 1, 1, 1, 'info', 1, 40, 5);
! 		$this-&gt;controls[] = &amp; new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'parent_id', 'tetukas', '', 1, 1, 1, $g_lang['news_category'], 1, 'avnews', 'id', 'subject');
  		
! 		$this-&gt;controls[] = &amp; new avcDbSelect( &amp;$this, 'user_id', 'useris', '', 1, 1, 1, 'useris', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = &amp; new avcHidden( &amp;$this, 'table_name', '', $this-&gt;parent, 0, 1);		
! 		$this-&gt;controls[] = &amp; new avcActions( &amp;$this, '', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Komentarai';
--- 48,62 ----
  
  
! 		$this-&gt;controls[] = new avcId( &amp;$this, 'id', '', '0', 0, 1, 1, 'id', 0);
! 		$this-&gt;controls[] = new avcText( &amp;$this, 'subject', 'subjectas', '', 1, 1, 1, 'subjectas', 1, 20);
! 		$this-&gt;controls[] = new avcTextArea( &amp;$this, 'info', 'info', '', 1, 1, 1, 'info', 1, 40, 5);
! 		$this-&gt;controls[] = new avcDate( &amp;$this, 'posted', $g_lang['news_date'], date('Y.m.d'), 1, 1, 1, $g_lang['news_date'], 1);
  
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'parent_id', 'tetukas', '', 1, 1, 1, $g_lang['news_category'], 1, 'avnews', 'id', 'subject');
  		
! 		$this-&gt;controls[] = new avcDbSelect( &amp;$this, 'user_id', 'useris', '', 1, 1, 1, 'useris', 1, 'u_users', 'id', 'username');
  		
! 		$this-&gt;controls[] = new avcHidden( &amp;$this, 'table_name', '', $this-&gt;parent, 0, 1);		
! 		$this-&gt;controls[] = new avcActions( &amp;$this, '', '', '', 0, 0, 1, 'Veiksmai', 0);
  
  		$this-&gt;description = 'Komentarai';


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000031.html">[artscene-cvs] art.scene.v2/htdocs/news/class avnews.class.php, 1.1,	1.2 avcomments.class.php, 1.1, 1.2 news.class.php, 1.4,	1.5 avnewscategory.class.php, 1.1, 1.2
</A></li>
	<LI>Next message: <A HREF="000035.html">[artscene-cvs] art.scene.v2/htdocs/control ini_edit.php, 1.1,	1.2 index.php, 1.1, 1.2 settings_edit.php, 1.1,	1.2 control.php, 1.1, 1.2 admin.php, 1.3, 1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32">[ date ]</a>
              <a href="thread.html#32">[ thread ]</a>
              <a href="subject.html#32">[ subject ]</a>
              <a href="author.html#32">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/artscene-cvs">More information about the artscene-cvs
mailing list</a><br>
</body></html>
